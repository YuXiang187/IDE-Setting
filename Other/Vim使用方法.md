# Vim使用方法

## 1.Vim基本操作

### 1.打开文件

| Vi 使用的选项          | 说 明                                             |
| ---------------------- | ------------------------------------------------- |
| vim filename           | 打开或新建一个文件，并将光标置于第一行的首部      |
| vim -r filename        | 恢复上次 vim 打开时崩溃的文件                     |
| vim -R filename        | 把指定的文件以只读方式放入 Vim 编辑器中           |
| vim + filename         | 打开文件，并将光标置于最后一行的首部              |
| vi +n filename         | 打开文件，并将光标置于第 n 行的首部               |
| vi +/pattern filename  | 打幵文件，并将光标置于第一个与 pattern 匹配的位置 |
| vi -c command filename | 在对文件进行编辑前，先执行指定的命令              |

### 2.插入文本

| 快捷键    | 功能描述                                                     |
| --------- | ------------------------------------------------------------ |
| i         | 在当前光标所在位置插入随后输入的文本，光标后的文本相应向右移动 |
| I         | 在光标所在行的行首插入随后输入的文本，行首是该行的第一个非空白字符，相当于光标移动到行首执行 i 命令 |
| o         | 在光标所在行的下面插入新的一行。光标停在空行首，等待输入文本 |
| O（大写） | 在光标所在行的上面插入新的一行。光标停在空行的行首，等待输入文本 |
| a         | 在当前光标所在位置之后插入随后输入的文本                     |
| A         | 在光标所在行的行尾插入随后输入的文本，相当于光标移动到行尾再执行 a 命令 |

### 3.Vim查找文本

> 如果想忽略大小写，则输入命令 ":set ic"；调整回来输入":set noic"。

| 快捷键 | 功能描述                         |
| ------ | -------------------------------- |
| /abc   | 从光标所在位置向前查找字符串 abc |
| /^abc  | 查找以 abc 为行首的行            |
| /abc$  | 查找以 abc 为行尾的行            |
| ?abc   | 从光标所在为主向后查找字符串 abc |
| n      | 向同一方向重复上次的查找指令     |
| N      | 向相反方向重复上次的查找指定     |

### 4.Vim替换文本

| 快捷键          | 功能描述                                                     |
| --------------- | ------------------------------------------------------------ |
| r               | 替换光标所在位置的字符                                       |
| R               | 从光标所在位置开始替换字符，其输入内容会覆盖掉后面等长的文本内容，按“Esc”可以结束 |
| :s/a1/a2/g      | 将当前光标所在行中的所有 a1 用 a2 替换                       |
| :n1,n2s/a1/a2/g | 将文件中 n1 到 n2 行中所有 a1 都用 a2 替换                   |
| :g/a1/a2/g      | 将文件中所有的 a1 都用 a2 替换                               |

### 5.Vim删除文本

| 快捷键  | 功能描述                               |
| ------- | -------------------------------------- |
| x       | 删除光标所在位置的字符                 |
| dd      | 删除光标所在行                         |
| ndd     | 删除当前行（包括此行）后 n 行文本      |
| dG      | 删除光标所在行一直到文件末尾的所有内容 |
| D       | 删除光标位置到行尾的内容               |
| :a1,a2d | 函数从 a1 行到 a2 行的文本内容         |

### 6.Vim复制和粘贴文本	

| 快捷键    | 功能描述                                                   |
| --------- | ---------------------------------------------------------- |
| p         | 将剪贴板中的内容粘贴到光标后                               |
| P（大写） | 将剪贴板中的内容粘贴到光标前                               |
| y         | 复制已选中的文本到剪贴板                                   |
| yy        | 将光标所在行复制到剪贴板，此命令前可以加数字 n，可复制多行 |
| yw        | 将光标位置的单词复制到剪贴板                               |

### 7.Vim其他常用快捷键

把两行进行连接（将两行间的换行符去掉）：**在命令模式中按下 "J" 键**

如果不小心误删除了文件内容，则可以通过 "u" 键来撤销刚才执行的命令

### 8.Vim保存退出文本

| 命令        | 功能描述                                           |
| ----------- | -------------------------------------------------- |
| :wq         | 保存并退出 Vim 编辑器                              |
| :wq!        | 保存并强制退出 Vim 编辑器                          |
| :q          | 不保存就退出 Vim 编辑器                            |
| :q!         | 不保存，且强制退出 Vim 编辑器                      |
| :w          | 保存但是不退出 Vim 编辑器                          |
| :w!         | 强制保存文本                                       |
| :w filename | 另存到 filename 文件                               |
| x!          | 保存文本，并退出 Vim 编辑器，更通用的一个 vim 命令 |
| ZZ          | 直接退出 Vim 编辑器                                |

## 2.Vim移动光标

### 1.Vim方向快捷键

| 快捷键 | 功能描述                                               |
| ------ | ------------------------------------------------------ |
| h      | 光标向左移动一位                                       |
| j      | 光标向下移动一行（以回车为换行符），也就是光标向下移动 |
| k      | 光标向上移动一行（也就是向上移动）                     |
| l      | 光标向右移动一位                                       |

### 2.Vim光标以单词为单位移动

| 快捷键   | 功能描述                            |
| -------- | ----------------------------------- |
| w 或 W   | 光标移动至下一个单词的单词首        |
| b 或 B   | 光标移动至上一个单词的单词首        |
| e 或 E   | 光标移动至下一个单词的单词尾        |
| nw 或 nW | n 为数字，表示光标向右移动 n 个单词 |
| nb 或 nB | n 为数字，表示光标向左移动 n 个单词 |

### 3.Vim光标移动至行首或行尾

| 快捷键 | 功能描述                                 |
| ------ | ---------------------------------------- |
| 0 或 ^ | 光标移动至当前行的行首                   |
| $      | 光标移动至当前行的行尾                   |
| n$     | 光标移动至当前行只有 n 行的行尾，n为数字 |

### 4.Vim光标移动至指定字符

| 快捷键 | 功能描述                          |
| ------ | --------------------------------- |
| fx     | 光标移动至当前行中下一个 x 字符处 |
| Fx     | 光标移动至当前行中下一个 x 字符处 |

### 5.Vim光标移动到指定行

| 快捷键 | 功能描述                                                     |
| ------ | ------------------------------------------------------------ |
| gg     | 光标移动到文件开头                                           |
| G      | 光标移动至文件末尾                                           |
| nG     | 光标移动到第 n 行，n 为数字                                  |
| :n     | **编辑模式下使用的快捷键**，可以将光标快速定义到指定行的行首 |

### 6.Vim光标移动到匹配的括号处

想迅速地将光标定位到与第 n 行的 "{" 相对应的 "}" 处，则可以将光标先定位在 "{" 处，然后再使用 "％" 命令，使之定位在 "}" 处

## 3.Vim撤销和恢复

| 快捷键    | 功能                                                         |
| --------- | ------------------------------------------------------------ |
| u（小写） | undo 的第 1 个字母，功能是撤销最近一次对文本做的修改操作。   |
| Ctrl+R    | Redo 的第 1 个字母，功能是恢复最近一次所做的撤销操作。       |
| U（大写） | 第一次会撤销对一行文本（光标所在行）做过的全部操作，第二次使用该命令会恢复对该行文本做过的所有操作。 |

## 4.Vim可视化用法

| 命令             | 功能                                                         |
| ---------------- | ------------------------------------------------------------ |
| v（小写）        | 又称字符可视化模式，此模式下目标文本的选择是以字符为单位的，也就是说，该模式下要一个字符一个字符的选中要操作的文本。 |
| V（大写）        | 又称行可视化模式，此模式化目标文本的选择是以行为单位的，也就是说，该模式化可以一行一行的选中要操作的文本。 |
| Ctrl+v（组合键） | 又称块可视化模式，该模式下可以选中文本中的一个矩形区域作为目标文本，以按下 Ctrl+v 位置作为矩形的一角，光标移动的终点位置作为它的对角。 |

可视化支持的命令：

| 命令      | 功能                                                         |
| --------- | ------------------------------------------------------------ |
| d         | 删除选中的部分文本。                                         |
| D         | 删除选中部分所在的行，和 d 不同之处在于，即使选中文本中有些字符所在的行没有都选中，删除时也会一并删除。 |
| y         | 将选中部分复制到剪贴板中。                                   |
| p（小写） | 将剪贴板中的内容粘贴到光标之后。                             |
| P（大写） | 将剪贴板中的内容粘贴到光标之前。                             |
| u（小写） | 将选中部分中的大写字符全部改为小写字符。                     |
| U（大写） | 将选中部分中的小写字符全部改为大写字符。                     |
| >         | 将选中部分右移（缩进）一个 tab 键规定的长度（CentOS 6.x 中，一个tab键默认相当于 8 个空白字符的长度）。 |
| <         | 将选中部分左移一个 tab 键规定的长度（CentOS 6.x 中，一个tab键默认相当于 8 个空白字符的长度）。 |

